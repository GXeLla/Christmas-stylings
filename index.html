<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./styles.css" />
    <!--h1 teext for christmas-->
    <link
      href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@700&family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <nav>
        <a href="./hero.html">Hero page Clock</a>
        <a href="./first-loading-screen.html">onPageLoading screen</a>
        <a href="./main-loading-screen.html">secondary loading scrn</a>
        <a href="./first-loading-scrn-dark-christmas.html">onPageLoading christmas</a>
        <a href="./main-loading-scrn-christmas.html">secondary Loading scrn christmas</a>
        <span></span>
      </nav>
    </header>
    <main>
      <div class="hero">
        <canvas id="canvas"></canvas>

        <div class="stars">
          <!--stars-->
          <svg class="stars" viewBox="0 0 1366 768" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <!-- single reusable star -->
              <symbol id="star" viewBox="-10 -10 20 20">
                <polygon fill="#D6B2A5" points="0,-10 2.5,-3 10,0 2.5,3 0,10 -2.5,3 -10,0 -2.5,-3" />
              </symbol>
            </defs>

            <!-- stars -->
            <use href="#star" x="100" y="100" width="14" height="14" />
            <use href="#star" x="300" y="200" width="20" height="20" />
            <use href="#star" x="600" y="120" width="12" height="12" />
            <use href="#star" x="900" y="90" width="16" height="16" />
            <use href="#star" x="1200" y="250" width="18" height="18" />
            <use href="#star" x="700" y="400" width="14" height="14" />
          </svg>
        </div>
        <!-- Lights (top border) -->
        <ul class="lightrope">
          <!-- add/remove as many as you like -->
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
          <li></li>
        </ul>
        <!--snowflakes-->
        <div class="snow-container">
          <div class="snowflake">&#x2744;</div>
          <div class="snowflake">&#x2745;</div>
          <div class="snowflake">&#x2746;</div>
          <div class="snowflake">&#x2744;</div>
          <div class="snowflake">&#x2745;</div>
          <div class="snowflake">&#x2746;</div>
          <div class="snowflake">&#x2744;</div>
          <div class="snowflake">&#x2745;</div>
          <div class="snowflake">&#x2746;</div>
          <div class="snowflake">&#x2744;</div>
          <div class="snowflake">&#x2745;</div>
          <div class="snowflake">&#x2746;</div>
          <div class="snowflake">&#x2744;</div>
          <div class="snowflake">&#x2745;</div>
          <div class="snowflake">&#x2746;</div>
          <div class="snowflake">&#x2744;</div>
          <div class="snowflake">&#x2745;</div>
          <div class="snowflake">&#x2746;</div>
        </div>
      </div>
      <!--buttons-->
      <section id="buttons">
        <h1>Christmas Button Collection II</h1>
        <div class="buttons-grid">
          <button class="xmas-btn btn-shimmer gift-btn">Merry Christmas</button>
          <button class="xmas-btn btn-glow star-btn">Holiday Sale</button>
          <button class="xmas-btn btn-snow snow-btn">Let it Snow</button>
          <button class="xmas-btn btn-pulse music-btn">Christmas Music</button>
          <button class="xmas-btn tree-btn">Christmas Tree</button>
        </div>
        <h1>buttons need on click animation</h1>

        <!--dark- light mode has js-->
        <div>
          <input type="checkbox" class="checkbox" id="dark-light-switch" />
          <label for="dark-light-switch" class="checkbox-label dark-light">
            <span class="ball"></span>
          </label>
        </div>
        <!--christmas mode / classic-->
        <div>
          <input type="checkbox" class="checkbox" id="christmas-classic-switch" />
          <label for="christmas-classic-switch" class="checkbox-label christmas-classic">
            <span class="ball"></span>
          </label>
        </div>
      </section>
      <!-- idea for background and santa i think better in footer or payments tab -->

      <!--lamps at the top of the page-->
      <section id="formtypes">
        <form>
          <div class="form-box">
            <input type="text" id="fname" name="fname" required/>
            <label for="fname">First Name</label>
          </div>
          <div class="form-box">
            <input type="text" id="lname" name="lname" required/>
            <label for="lname">Last Name</label>
          </div>
        </form>
      </section>
      <footer>
          <a href="#"><span class="logo">&infintie;</span> <span class="text">test</span></a>
          <a href="#"><span class="logo">&infintie;</span> <span class="text">test</span></a>
          <a href="#"><span class="logo">&infintie;</span> <span class="text">test</span></a>
          <a href="#"><span class="logo">&infintie;</span> <span class="text">test</span></a>
      </footer>
    </main>
    <script>
      const checkboxDL = document.getElementById("dark-light-switch");
      const checkboxCC = document.getElementById("christmas-classic-switch");
      checkboxDL.addEventListener("change", () => {
        document.body.classList.toggle("dark");
      });
      checkboxCC.addEventListener("change", () => {
        document.body.classList.toggle("christmas");
      });
      //============
      /* Snow particles for button */
      const snowBtns = document.querySelectorAll(".snow-btn");

      setInterval(() => {
        snowBtns.forEach((btn) => {
          const snow = document.createElement("span");
          snow.innerHTML = "â„";
          snow.style.position = "absolute";
          snow.style.left = Math.random() * 100 + "%";
          snow.style.fontSize = Math.random() * 10 + 10 + "px";
          snow.style.top = "0px";
          snow.style.pointerEvents = "none";

          btn.appendChild(snow);

          setTimeout(() => snow.remove(), 5000);
        });
      }, 500);

      ///

      ///light

      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");

      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const bulbsCount = 65;
      const strings = [];
      const gravity = 0.09;
      const damping = 0.98;
      const segmentsPerString = 18; // more segments = smoother rope
      const leftBoundary = canvas.width * 0.25;
      const rightBoundary = canvas.width * 0.75;

      // Mouse tracking
      const mouse = { x: 0, y: 0, prevX: 0, prevY: 0, vx: 0, vy: 0 };
      canvas.addEventListener("mousemove", (e) => {
        mouse.vx = e.clientX - mouse.x;
        mouse.vy = e.clientY - mouse.y;
        mouse.x = e.clientX;
        mouse.y = e.clientY;
      });

      // Particle for rope segment
      class Particle {
        constructor(x, y) {
          this.x = x;
          this.y = y;
          this.oldX = x;
          this.oldY = y;
        }

        update() {
          const vx = (this.x - this.oldX) * damping;
          const vy = (this.y - this.oldY) * damping;
          this.oldX = this.x;
          this.oldY = this.y;
          this.x += vx;
          this.y += vy + gravity;
        }

        applyForce(fx, fy) {
          this.x += fx;
          this.y += fy;
        }
      }

      // String with segments and bulb
      class StringBulb {
        constructor(x, y, length) {
          this.originX = x;
          this.originY = y;
          this.length = length;
          this.bulbRadius = 10;

          this.segments = [];
          const segmentLength = length / segmentsPerString;
          for (let i = 0; i <= segmentsPerString; i++) {
            const px = x;
            const py = y + i * segmentLength;
            this.segments.push(new Particle(px, py));
          }

          // Color for string: mostly white with low opacity
          this.color = `rgba(255,255,255,${0.05 + Math.random() * 0.05})`;
        }

        update() {
          // Update each particle
          this.segments.forEach((p) => p.update());

          // Constrain particles
          for (let iter = 0; iter < 3; iter++) {
            // multiple iterations for stability
            for (let i = 0; i < this.segments.length; i++) {
              if (i === 0) {
                // First particle fixed at origin
                const p = this.segments[i];
                p.x = this.originX;
                p.y = this.originY;
              } else {
                // Maintain distance with previous particle
                const p1 = this.segments[i - 1];
                const p2 = this.segments[i];
                const dx = p2.x - p1.x;
                const dy = p2.y - p1.y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                const diff = (dist - this.length / segmentsPerString) / dist;
                const offsetX = dx * 0.5 * diff;
                const offsetY = dy * 0.5 * diff;

                if (i !== 1) (p1.x += offsetX), (p1.y += offsetY); // move previous
                p2.x -= offsetX;
                p2.y -= offsetY;
              }
            }
          }

          // Mouse interaction: apply force to closest particle
          this.segments.forEach((p) => {
            const dist = Math.hypot(mouse.x - p.x, mouse.y - p.y);
            if (dist < 10) {
              p.applyForce(mouse.vx * 0.5, mouse.vy * 0.5);
            }
          });
        }

        draw() {
          // Draw string
          ctx.beginPath();
          ctx.moveTo(this.segments[0].x, this.segments[0].y);
          for (let i = 1; i < this.segments.length; i++) {
            ctx.lineTo(this.segments[i].x, this.segments[i].y);
          }
          ctx.strokeStyle = this.color;
          ctx.lineWidth = 1.5;
          ctx.stroke();

          // Draw bulb at last segment
          const bulb = this.segments[this.segments.length - 1];
          const dist = Math.hypot(mouse.x - bulb.x, mouse.y - bulb.y);
          const glow = Math.min(120, Math.max(15, 120 - dist));
          const gradient = ctx.createRadialGradient(bulb.x, bulb.y, 0, bulb.x, bulb.y, this.bulbRadius * 3);
          gradient.addColorStop(0, "rgba(255,255,220,1)");
          gradient.addColorStop(0.3, "rgba(255,255,200,0.8)");
          gradient.addColorStop(1, "rgba(255,255,200,0)");
          ctx.fillStyle = gradient;
          ctx.beginPath();
          ctx.arc(bulb.x, bulb.y, this.bulbRadius, 0, Math.PI * 2);
          ctx.fill();

          // Outer glow
          ctx.shadowColor = "rgba(255,255,200,0.9)";
          ctx.shadowBlur = glow;
          ctx.beginPath();
          ctx.arc(bulb.x, bulb.y, this.bulbRadius, 0, Math.PI * 2);
          ctx.fill();
          ctx.shadowBlur = 0;
        }
      }

      // Initialize all strings
      function initStrings() {
        strings.length = 0;
        const minLength = canvas.height * 0.2;
        const maxLength = canvas.height * 0.35;
        const spacing = (rightBoundary - leftBoundary) / (bulbsCount - 1);
        const verticalOffset = 12;

        for (let i = 0; i < bulbsCount; i++) {
          const x = leftBoundary + i * spacing + (Math.random() - 0.5) * 5;
          const length = minLength + Math.random() * (maxLength - minLength);

          strings.push(new StringBulb(x, 50 + verticalOffset, length));
        }
      }

      // Animation loop
      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Background fade
        ctx.fillStyle = "rgba(17,17,17,0.25)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        strings.forEach((s) => {
          s.update();
          s.draw();
        });

        requestAnimationFrame(animate);
      }

      initStrings();
      animate();
    </script>
  </body>
</html>
